<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jquery-延迟加载</title>
<style type="text/css">
body, h1, h2, h3, h4, h5, h6, p, blockquote, pre, form, input, textarea, button, fieldset, legend  { margin: 0; padding: 0; }
body { font:12px 'Century Gothic',Arial; background:#FFF; }
h1,h2,h3,h4 { font-family:'Century Gothic',Microsoft YaHei; }
ul, ol { list-style: none; }
/*正文样式*/
.wrap { width: 750px; margin:0 auto; }
.caption { padding:30px 0 10px; text-align:center; }
.caption h1 { font-size:50px; }
.caption p { line-height:22px; color:red; }
#main li { margin:20px 0; text-align:center; }
#main img { background:url(images/loading.gif) no-repeat center center; }
</style>
</head>
<body>
<div class="wrap">
    <div class="caption">
        <h1>jQuery-延迟加载</h1>
        <p>下拉滚动条查看效果，更多功能等待完善</p>
    </div>
    <div id="main">
        <ul>
            <li><img width="468" height="292" data-original="images/1.jpg" src="images/grey.png" alt=""></li>
            <li><img width="468" height="292" data-original="images/2.jpg" src="images/grey.png" alt=""></li>
            <li><img width="468" height="292" data-original="images/3.jpg" src="images/grey.png" alt=""></li>
            <li><img width="468" height="292" data-original="images/4.jpg" src="images/grey.png" alt=""></li>
            <li><img width="468" height="292" data-original="images/5.jpg" src="images/grey.png" alt=""></li>
        </ul>
    </div>
</div>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
/**
 * URL : http://www.w3cmm.com
 * DATE : 2012年12月19日
 */

;(function($) {
    $.fn.extend({
        lazyLoad: function(options) {
            options = $.extend({
                distance: 0 //设置距底部不执行lazyLoad效果的距离
            }, options);

            var obj = $(this).find("img");  //获取对象
            var $window = $(window);
            //替换图片路径
            var update = function() {
                obj.each(function(){
                    var pageTop = $window.height() + $window.scrollTop() - options.distance;
                    if ($(this).offset().top <= pageTop) {
                        var path = $(this).attr("data-original");
                        if (path) {
                            $(this).hide().attr("src", path).removeAttr("data-original").fadeIn();
                        }
                    }
                });
            }

            update();
            $(window).bind("scroll", function(){
                update();
            })
        }
    })
})(jQuery);

//实例应用演示
$(function() {
    $("#main").lazyLoad({
        //
    });
})
</script>
</body>
</html>