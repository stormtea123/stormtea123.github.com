<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jquery-翻页滚动焦点图插件</title>
<style type="text/css">
h1, h2, h3, h4, h5, h6, p, blockquote, pre, form, input, textarea, button, fieldset, legend, ul, ol, li, dl, dt, dd, th, td { margin: 0; padding: 0; }
ol, ul { list-style: none; }
body { font-size: 12px; font-family: Arial; color: #333; }
h1, h2, h3 { font-family: Microsoft YaHei; }
h2 { padding:10px 0; color:red; }
.auto { overflow: hidden; zoom: 1; }
/*正文样式*/
.wrap { width: 750px; margin:0 auto 100px; }
.caption { padding:30px 0 10px; text-align:center; }
.caption h1 { font-size:50px; }
.caption p { line-height:22px; color:red; }
.slide { width:778px; overflow:hidden; position:relative;}
.slide-panel { height:192px; margin:0 100px; overflow:hidden; }
.slide-panel ul { height:192px; position:relative; }
.slide-panel li { width:137px; height:192px; float:left; margin-right:10px; _display:inline; font-size:137px; text-align:center; line-height:192px; background:#EEE;  }
.slide-pager { padding:6px 0; text-align:center; overflow:hidden; }
.slide-pager span { width:10px; height:10px; border-radius:5px; display:inline-block; margin:3px; background:#593325; cursor:pointer; }
.slide-pager .current { display:inline-block; background:#FF5A00; }
.pre-next { width:83px; height:90px; cursor:pointer; font-size:180px; line-height:350px; position:absolute; top:50px; }
.pre { left:0; background:url(images/pre.png) no-repeat left top; }
.next { right:0; background:url(images/next.png) no-repeat left top; }
</style>
<script type="text/javascript" src="jquery.js"></script>
</head>
<body>
<div class="wrap">
    <div class="caption">
        <h1>翻页滚动焦点图插件</h1>

        <h2>一：可配置是否自动滚动，单个循环滚动，不可使用分页按钮</h2>
    </div>
    <div class="slide" id="slide-1">
        <div class="slide-panel" id="slidepanel-1">
            <ul>
                <li><img src="images/1.jpg" width="137" height="192"></li>
                <li><img src="images/2.jpg" width="137" height="192"></li>
                <li><img src="images/3.jpg" width="137" height="192"></li>
                <li><img src="images/4.jpg" width="137" height="192"></li>
                <li><img src="images/5.jpg" width="137" height="192"></li>
                <li><img src="images/6.jpg" width="137" height="192"></li>
            </ul>
        </div>
        <div class="slide-pager" id="slidepager-1"></div>
        <div class="pre-next pre"></div>
        <div class="pre-next next"></div>
    </div>
    <div class="caption">
        <h2>二：一次滚动多个,并插入翻页按钮</h2>
    </div>
    <div class="slide" id="slide-2">
        <div class="slide-panel" id="slidepanel-2">
            <ul>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>5</li>
                <li>6</li>
                <li>7</li>
                <li>8</li>
                <li>9</li>
            </ul>
        </div>
        <div class="slide-pager" id="slidepager-2"></div>
        <div class="pre-next pre"></div>
        <div class="pre-next next"></div>
    </div>
</div>
<script type="text/javascript">
/**
 * URL : http://www.w3cmm.com
 * DATE : 2012年12月7日
 */
;(function($) {
    $.fn.extend({
        slideAndClick: function(options) {
            options = $.extend({
                panel: null,
                pager: null,
                pre: ".pre",
                next: ".next",
                isScroll: false, //是否自动滚动
                isPager: false,
                interval: 3000, //自动滚动时间间隔
                number:1, //每次滚动个数
                effect:"scroll"
            }, options);
            var obj = $(this);
            var $panel = $(options.panel, this);
            var $panelScroll =$panel.find("ul");
            var $panelItem = $panel.find("li");
            var $pager = $(options.pager, this);
            var $pre = $(options.pre, this);
            var $next = $(options.next, this);
            var len = $panelItem.size(); //获取焦点图个数
            var page = 0; //默认序号
            var pageCount = Math.ceil(len/options.number); //获取按钮个数

            var itemWidth = $panelItem.width() + parseInt($panelItem.css("marginRight"));
            var scrollWidth = itemWidth*options.number;
            var scrollTimer;

            $panel.find("ul").css("width",itemWidth * (len));

            //如果需要插入翻页按钮
            if (options.isPager) {
                //插入翻页按钮元素
                (function() {
                    var pagerChild = '';
                    for(var i = 0; i < pageCount; i++) {
                        pagerChild += "<span></span>";
                    }
                    $pager.append(pagerChild);
                })();

                var $pagerItem = $pager.find("span"); //翻页按钮
                $pagerItem.eq(0).addClass("current"); //默认让第一个按钮高亮

                //显示按钮对应的图片
                $pagerItem.bind("click",function(){
                    index = $pagerItem.index(this);
                    showPic(index);
                });

                //显示指定序列的图片
                showPic = function(index) {
                    var nowLeft = -index*scrollWidth;
                    $panelScroll.stop(true,false).animate({"left":nowLeft},600);
                    //让当前翻页按钮高亮
                    $pagerItem.removeClass("current").eq(index).addClass("current");
                }
            }


            //向左滚动
            scrollLeft = function(){
                switch(options.effect) {
                    case "scroll":
                        $panelScroll.stop(true,false).animate({
                            "left": - scrollWidth + "px"
                        },300,function(){
                            $panelScroll.css("left", 0);
                            $panelScroll.find("li:first").appendTo($panelScroll);
                        });
                        break;
                    case "multiple":
                        page++;
                        if (page == pageCount) {
                            page = 0;
                        }
                        $panelScroll.stop(true,false).animate({
                            "left": -page*scrollWidth + "px"
                        },300);
                        break;
                }
                if (options.isPager){
                    $pagerItem.removeClass("current").eq(page).addClass("current");
                }
            //alert(options.panel + " - " + options.isScroll);
            }
            //向右滚动
            scrollRight = function(){
                switch(options.effect) {
                    case "scroll":
                        $panelScroll.find("li:last").prependTo($panelScroll);
                        $panelScroll.css("left", - scrollWidth + "px")
                        $panelScroll.stop(true,false).animate({
                            "left": 0
                        },300);
                        break;
                    case "multiple":
                        page--;
                        if (page == -1) {
                            page = pageCount-1 ;
                        }
                        $panelScroll.stop(true,false).animate({
                            "left": -page*scrollWidth + "px"
                        },300);
                        break;
                }
                if (options.isPager){
                    $pagerItem.removeClass("current").eq(page).addClass("current");
                }
            }
            //如果设置自动滚动
            if(options.isScroll) {
                var autoScroll = function(){
                    scrollTimer = setInterval(scrollLeft, options.interval)
                }
                var stopScroll = function(){
                    clearInterval(scrollTimer);
                }
                obj.hover(stopScroll,autoScroll).trigger("mouseleave");
            } else {
                //scrollTimer = null;
            }
            //绑定点击事件
            $next.bind("click", scrollLeft);
            $pre.bind("click", scrollRight);
        }
    })
})(jQuery);

//实例应用演示
$(function() {
    //单个滚动
    $("#slide-1").slideAndClick({
        panel: "#slidepanel-1",
        isScroll: true
    });
    //多个滚动
    $("#slide-2").slideAndClick({
        panel: "#slidepanel-2",
        pager: "#slidepager-2",
        isPager: true,
        number: 4,
        effect: "multiple"
    });

})

</script>
<div class="test" id="test"></div>
</body>
</html>