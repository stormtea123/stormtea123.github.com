<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jquery-模拟手机滑屏</title>
<style type="text/css">
h1, h2, h3, h4, h5, h6, p, blockquote, pre, form, input, textarea, button, fieldset, legend, ul, ol, li, dl, dt, dd, th, td { margin: 0; padding: 0; }
ol, ul { list-style: none; }
body { font-size: 12px; font-family: Arial; color: #333; }
h1, h2, h3 { font-family: Microsoft YaHei; }
.auto { overflow: hidden; zoom: 1; }
/*正文样式*/
.wrap { width: 750px; margin:0 auto; }
.caption { padding:30px 0 10px; text-align:center; }
.caption h1 { font-size:50px; }
.caption p { line-height:22px; color:red; }
.touch { width:750px; overflow:hidden; position:relative; }
.touch-panel { height:350px; overflow:hidden; background:#EEE; }
.touch-panel ul { height:350px; position:absolute; overflow:hidden; }
.touch-panel li { width:750px; height:350px; line-height:350px; font-size:350px; text-align:center; font-weight:bold; float:left; }
.touch-pager { padding:6px 0; text-align:center; overflow:hidden; }
.touch-pager span { width:10px; height:10px; border-radius:5px; display:inline-block; margin:3px; background:#593325; }
.touch-pager .current { display:inline-block; background:#FF5A00; }

</style>
<script type="text/javascript" src="jquery.js"></script>
</head>
<body>
<div class="wrap">
    <div class="caption">
        <h1>jQuery模拟手机滑屏</h1>
        <p>鼠标放在图片上向左或向右拖动查看效果</p>
    </div>
    <div class="touch" id="touch">
        <div class="touch-panel" id="touchpanel">
            <ul>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
            </ul>
        </div>
        <div class="touch-pager" id="touchpager"></div>
    </div>
</div>
<script type="text/javascript">
/**
 * URL : http://www.w3cmm.com
 * DATE : 2012年11月23日
 */
;(function($) {
    $.fn.extend({
        moibleTouch: function(options) {
            options = $.extend({
                panel: null,
                pager: null
            }, options);
            var obj = $(this);  //获取对象

            var $panel = $(options.panel, this);  //滑动面板
            var $pager = $(options.pager, this);  //翻页容器           
            var len = $panel.find("li").size();  //滑动面板数量
            var panelWidth = $panel.find("li").width();  //单个滑动面板宽度
            var $pannelContainer = $panel.find("ul"); //移动的对象

            var startLeft, endLeft, startX; //坐标变量
            var index = 0; //默认序号
            var direction = 0;
            var draging = false;


            //设置全部滑动面板总宽度
            $pannelContainer.width((len + 1) * panelWidth);

            //插入翻页按钮
            (function(){
                var pagerChild = "";
                for(var i = 0; i < len; i++) {
                   pagerChild += "<span></span>";
                }
                $pager.append(pagerChild);
            })();

            var $pagerItem = $pager.find("span"); //翻页按钮
            $pagerItem.eq(0).addClass("current");

            $pagerItem.hover(function(){
                index = $pagerItem.index(this);
                showPic(index);

            })

            //清除事件
            clearEvent = function() {
                
            }

            //开始拖动
            startDrag = function(event) {
                var offset = $(this).offset();

                startLeft = offset.left;
                startX = event.pageX;

                $(this).stop(true, false).mousemove(moveDrag).css("cursor", "move");
                draging = true;
            }

            moveDrag = function(event) {
                var offset = $(this).offset();
                var movepx = event.pageX - startX;
                endLeft = startLeft + movepx;

                direction = 0;
                if(movepx > 0 && movepx >= (panelWidth / 6)) {
                    direction = 1;
                } else if(movepx < 0 && Math.abs(movepx) >= (panelWidth / 6)) {
                    direction = -1;
                }
                $(this).css("left", endLeft - obj.offset().left);
                return true;
            }
            //结束拖动
            endDrag = function() {
                if(draging) {
                    $pannelContainer.unbind("mousemove", moveDrag).css("cursor", "auto");
                    if(direction == 1) {
                        index--;
                    } else if(direction == -1) {
                        index++;
                    }

                    if(index == -1 ) index = 0;
                    if(index == len ) {
                        index = ( len -1 );
                    }

                    showPic(index);
                    direction = 0;
                    draging = false;
                }
            }
            
            //显示指定序列的图片
            showPic = function (index) {
                $pannelContainer.stop(true, false).animate({
                    left: -index * panelWidth
                }, "slow");

                //让当前翻页按钮高亮
                $pagerItem.removeClass("current").eq(index).addClass("current");                
            }


            //遍历匹配元素绑定事件
            return this.each(function() {
                //$(this).bind("mouseup", endDrag);
                $pannelContainer.bind("mousedown", startDrag).bind("click", clearEvent).bind("mouseup", endDrag).bind("mouseout", endDrag);
            })
        }
    })
})(jQuery);

//实例应用演示
$(function() {
    $("#touch").moibleTouch({
        panel: "#touchpanel",
        pager: "#touchpager"
    });
})
</script>
</body>
</html>