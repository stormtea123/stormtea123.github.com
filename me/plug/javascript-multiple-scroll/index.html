<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>JavaScript-热点滚动</title>
<style type="text/css">
h1, h2, h3, h4, h5, h6, p, blockquote, pre, form, input, textarea, button, fieldset, legend, ul, ol, li, dl, dt, dd, th, td { margin: 0; padding: 0; }
ol, ul { list-style: none; }
html,body { font-size:90%; font-family: Arial; color: #333; }
h1, h2, h3 { font-family: Microsoft YaHei; }
/*正文样式*/
.wrap { width: 920px; margin:0 auto; }
.caption { padding:30px 0 10px; text-align:center; }
.caption h1 { font-size:4em; }
.caption p { line-height:22px; color:red; }
.slide { width:320px; margin:0 auto; }
.slide-list { width:320px; height:160px; overflow:hidden;  }
.slide-panel { height:160px; position:left; position:relative; }
.slide-panel li { width:100px; height:160px; float:left; margin-right:10px; _display:inline; line-height:160px; font-size:80px; text-align:center; background:#EEE; border-radius:10px; }
.nav { height:19px; padding:6px 0; line-height:19px; }
.pre-next { font-size:14px; font-weight:bold; cursor:pointer; }
.pre { float:left; }
.next { float:right; }
#pager { text-align: center; overflow: hidden; text-align: center; font-size: 0; }
#pager span { width: 10px; height: 10px; border-radius: 5px; display: inline-block; margin: 5px 2px 0; background: #593325; }
#pager .current { background: #FF5A00; }
</style>
</head>
<body>
<div class="wrap">
    <div class="caption">
        <h1>JavaScript-热点滚动插件</h1>
        <p>原生JavaScript改变scrollLeft的值实现动画效果，50%原创</p>
    </div>
    <div class="slide">
        <div class="slide-list" id="scrollWrap">
            <ul class="slide-panel">
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>5</li>
                <li>6</li>
                <li>7</li>
            </ul>
        </div>
        <div class="nav">
            <div class="pre-next next" id="next">Next&gt;&gt;</div>
            <div class="pre-next pre" id="prev">&lt;&lt;pre</div>
            <div id="pager"></div>
        </div>
    </div>
</div>
<script type="text/javascript">
/**
 * URL : http://www.w3cmm.com
 * DATE : 2013年2月3日
 */
var Util = {
    //选择器
    $: function(id) {
        return "string" == typeof(id) ? document.getElementById(id) : id;
    },
    //绑定事件
    addHandler: function(element, type, handler) {
        if(element.addEventListener) {
            element.addEventListener(type, handler, false);
        } else if(element.attachEvent) {
            element.attachEvent("on" + type, handler);
        } else {
            element["on" + type] = handler;
        }
    },
    //获取样式
    getDefaultStyle: function(obj, attribute) {
        return obj.currentStyle ? obj.currentStyle[attribute] : document.defaultView.getComputedStyle(obj, false)[attribute];
    }
};
(function() {
    function MultipleScroll(scrollWrap, frameWidth, prev, next, pager) {
        this.scrollWrap = Util.$(scrollWrap);
        this.panelWidth = Util.$(scrollWrap).offsetWidth;
        this.prevBtn = Util.$(prev);
        this.nextBtn = Util.$(next);
        this.pager = Util.$(pager);
        this.panel = Util.$(scrollWrap).getElementsByTagName("ul")[0];
        this.panel.innerHTML += this.panel.innerHTML;
        this.tagNames = this.panel.getElementsByTagName("li");
        this.len = this.tagNames.length;
        this.tagNamesMarginRight = Util.getDefaultStyle(this.tagNames[0], "marginRight");
        this.panel.style.width = (this.tagNames[0].offsetWidth + parseInt(this.tagNamesMarginRight)) * (this.len) + "px";
        this.scrollWidth = Math.round(this.panel.scrollWidth / 2);
        this.autoPlay = false;
        this.frameWidth = frameWidth || 0;
        this.status = "ready";
        this.speed = 30;
        this.space = 10;
        this.pagerIndex = 0;
        this.pagerArr = [];
        this.autoTimer = this.scrollTimer = null;
        if(!MultipleScroll.childs) {
            MultipleScroll.childs = []
        }
        MultipleScroll.childs.push(this);
        this.init();
    };
    MultipleScroll.prototype = {
        init: function() {
            if(!scrollWrap) {
                throw new Error("必须指定scrollWrap");
            }
            //鼠标移上去清除动画
            Util.addHandler(this.panel, "mouseover", function() {
                MultipleScroll.childs[0].stop();
            });
            //鼠标离开重新执行动画
            Util.addHandler(this.panel, "mouseout", function() {
                MultipleScroll.childs[0].play();
            });
            //自动播放
            if(this.autoPlay) {
                this.play()
            }
            //点击做按钮向右滚动
            if(this.prevBtn) {
                Util.addHandler(this.prevBtn, "mousedown", function() {
                    MultipleScroll.childs[0].prevMouseDown();
                });
                Util.addHandler(this.prevBtn, "mouseup", function() {
                    MultipleScroll.childs[0].prevEnd();
                });
                Util.addHandler(this.prevBtn, "mouseout", function() {
                    MultipleScroll.childs[0].prevEnd();
                });
            }
            //点击右滚动按钮向做滚动
            if(this.prevBtn) {
                Util.addHandler(this.nextBtn, "mousedown", function() {
                    MultipleScroll.childs[0].nextMouseDown();
                });
                Util.addHandler(this.nextBtn, "mouseup", function() {
                    MultipleScroll.childs[0].nextEnd();
                });
                Util.addHandler(this.nextBtn, "mouseout", function() {
                    MultipleScroll.childs[0].nextEnd();
                });
            }
            //如果需要分页按钮
            if(this.pager) {
                var pagers = Math.round(this.scrollWidth / this.panelWidth + 0.4),
                    i, tempObj;
                for(i = 0; i < pagers; i++) {
                    tempObj = document.createElement("span");
                    this.pager.appendChild(tempObj);
                    this.pagerArr.push(tempObj);
                    if(i == this.pagerIndex) {
                        tempObj.className = "current"
                    } else {
                        tempObj.className = " "
                    }
                    tempObj.title = "第" + (i + 1) + "页";
                    Util.addHandler(tempObj, "click", function(i) {
                        return function() {
                            MultipleScroll.childs[0].pageTo(i);
                        }
                    }(i));
                }
            }
        },
        next: function() {
            if(this.status !== "ready") {
                return;
            }
            status = "stoping";
            this.move(this.frameWidth, true);
        },
        play: function() {
            if(!this.autoPlay) {
                return;
            }
            //this.next()
            clearInterval(this.autoTimer);
            this.autoTimer = setInterval(function() {
                MultipleScroll.childs[0].next();
            }, 3000);
        },
        stop: function() {
            clearInterval(this.autoTimer);
        },
        move: function(num, quick) {
            var thisMove = num / 5;
            if(Math.abs(thisMove) < 1 && thisMove != 0) {
                thisMove = thisMove >= 0 ? 1 : -1
            } else {
                thisMove = Math.round(thisMove);
            }
            var temp = this.scrollWrap.scrollLeft + thisMove;
            if(thisMove > 0) {
                if(this.scrollWrap.scrollLeft + thisMove >= this.scrollWidth) {
                    this.scrollWrap.scrollLeft = this.scrollWrap.scrollLeft + thisMove - this.scrollWidth
                } else {
                    this.scrollWrap.scrollLeft += thisMove;
                }
            } else {
                if(this.scrollWrap.scrollLeft - thisMove <= 0) {
                    this.scrollWrap.scrollLeft = this.scrollWidth + this.scrollWrap.scrollLeft - thisMove
                } else {
                    this.scrollWrap.scrollLeft += thisMove
                }
            }
            num -= thisMove;
            if(Math.abs(num) == 0) {
                this.status = "ready";
                if(this.autoPlay) {
                    this.play()
                }
                this.heighLightIndex();
                return;
            } else {
                this.heighLightIndex();
                setTimeout(function() {
                    MultipleScroll.childs[0].move(num);
                }, 30)
            }
        },
        prevMouseDown: function() {
            if(this.status != "ready") {
                return;
            }
            this.status = "floating";
            this.scrollTimer = setInterval(function() {
                MultipleScroll.childs[0].moveRight();
            }, this.speed)
        },
        moveRight: function() {
            if(this.scrollWrap.scrollLeft - this.space <= 0) {
                this.scrollWrap.scrollLeft = this.scrollWidth + this.scrollWrap.scrollLeft - this.space
            } else {
                this.scrollWrap.scrollLeft -= this.space;
            }
            this.heighLightIndex();
        },
        prevEnd: function() {
            if(this.status != "floating") {
                return
            }
            this.status = "stoping";
            clearInterval(this.scrollTimer);
            var fill = -this.scrollWrap.scrollLeft % this.frameWidth;
            this.move(fill)
        },
        nextMouseDown: function() {
            if(this.status != "ready") {
                return;
            }
            this.status = "floating";
            this.scrollTimer = setInterval(function() {
                MultipleScroll.childs[0].moveLeft();
            }, this.speed)
        },
        moveLeft: function() {
            if(this.scrollWrap.scrollLeft + this.space >= this.scrollWidth) {
                this.scrollWrap.scrollLeft = this.scrollWrap.scrollLeft + this.space - this.scrollWidth;
            } else {
                this.scrollWrap.scrollLeft += this.space;
            }
            this.heighLightIndex();
        },
        nextEnd: function() {
            if(this.status != "floating") {
                return
            }
            this.status = "stoping";
            clearInterval(this.scrollTimer);
            var fill = this.frameWidth - this.scrollWrap.scrollLeft % this.frameWidth;
            this.move(fill)
        },
        pageTo: function(num) {
            if(this.status != "ready") {
                return;
            }
            this.status = "stoping";
            var fill = num * this.panelWidth - this.scrollWrap.scrollLeft;
            this.move(fill, true);
        },
        heighLightIndex: function() {
            this.pagerIndex = Math.round(this.scrollWrap.scrollLeft / this.panelWidth);
            if(this.pagerIndex > Math.round(this.scrollWidth / this.panelWidth + 0.4) - 1) {
                this.pagerIndex = 0
            }
            var i;
            for(i = 0; i < this.pagerArr.length; i++) {
                if(i == this.pagerIndex) {
                    this.pagerArr[i].className = "current"
                } else {
                    this.pagerArr[i].className = ""
                }
            }
        }
    }
    //创建一个实例
    new MultipleScroll("scrollWrap", 110, "prev", "next", "pager");
})();
</script>

</body>
</html>